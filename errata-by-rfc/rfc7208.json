[
  {
    "errata_id": 4001,
    "doc-id": "RFC7208",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Technical",
    "section": "A.4",
    "orig_text": "   example.com.           SPF  ( \"v=spf1 \"\r\n                                 \"-include:ip4._spf.%{d} \"\r\n                                 \"-include:ptr._spf.%{d} \"\r\n                                 \"+all\" )\r\n   ip4._spf.example.com.  SPF  \"v=spf1 -ip4:192.0.2.0/24 +all\"\r\n   ptr._spf.example.com.  SPF  \"v=spf1 -ptr +all\"",
    "correct_text": "   example.com.           TXT  ( \"v=spf1 \"\r\n                                 \"-include:ip4._spf.%{d} \"\r\n                                 \"-include:ptr._spf.%{d} \"\r\n                                 \"+all\" )\r\n   ip4._spf.example.com.  TXT  \"v=spf1 -ip4:192.0.2.0/24 +all\"\r\n   ptr._spf.example.com.  TXT  \"v=spf1 -ptr +all\"",
    "notes": "According to Section 14.1 and Appendix B, the use of DNS RR type SPF (99) has been removed from the protocol.",
    "submit_date": "2014-05-27",
    "submitter_name": "Jimmy Xu",
    "verifier_id": 127,
    "verifier_name": "Pete Resnick",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 4081,
    "doc-id": "RFC7208",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": 8.4,
    "orig_text": "(Paragraph 2):  if supported, the 5.7.1 enhanced status code\r\n...\r\n\r\n       550 5.7.1 SPF MAIL FROM check failed:\r\n       550 5.7.1 The domain example.com explains:\r\n       550 5.7.1 Please see http://www.example.com/mailpolicy.html\r\n",
    "correct_text": "if supported, the 5.7.7 enhanced status code\r\n...\r\n\r\n       550 5.7.7 SPF MAIL FROM check failed:\r\n       550 5.7.7 The domain example.com explains:\r\n       550 5.7.7 Please see http://www.example.com/mailpolicy.html\r\n",
    "notes": "5.7.1 generally refers to messages refused due to content or LOCAL policies.\r\n5.7.7 refers to messages where there is an integrity problem.\r\n\r\n5.7.7 is a better description for rejecting an unauthorized message due to the application of automatic checking criterion set by remote validation.\r\n\r\nThe author of this errata notes that the IANA is showing a pending addition to the enhanced codes to add SPF-specific error code 5.7.23 (in lieu of 5.7.1 or 5.7.7), but currently sees no valid RFC proposing it.  The draft is located at: http://tools.ietf.org/html/draft-ietf-appsawg-email-auth-codes-07\n --VERIFIER NOTES-- \nThe code used was the clear choice of the working group, and can't be changed through the errata system.",
    "submit_date": "2014-08-13",
    "submitter_name": "D. Stussy",
    "verifier_id": 130,
    "verifier_name": "Barry Leiba",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 4082,
    "doc-id": "RFC7208",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": 8.7,
    "orig_text": "...  If the message is rejected during the SMTP transaction for\r\nthis reason, the software SHOULD use an SMTP reply code of 550\r\nand, if supported, the 5.5.2 enhanced status code ...",
    "correct_text": "...  If the message is rejected during the SMTP transaction for\r\nthis reason, the software SHOULD use an SMTP reply code of 550\r\nand, if supported, the 5.7.8 enhanced status code ...",
    "notes": "5.5.2 refers to responses where there's an SMTP COMMAND syntax error.\r\n5.7.8 refers to messages where authentication credentials are invalid.\r\n\r\n5.7.8 is a better description for rejecting an unauthorized message due to the\r\napplication of invalid authentication credentials such as bad syntax in an SPF DNS record.\r\n\r\nThe author of this errata notes that the IANA is showing a pending addition to\r\nthe enhanced codes to add SPF-specific error code 5.7.24 (in lieu of 5.5.2 or\r\n5.7.8), but currently sees no valid RFC proposing it.  The draft is located at:\r\nhttp://tools.ietf.org/html/draft-ietf-appsawg-email-auth-codes-07\r\n\r\nThe use of 5.5.2 here is misleading since the source of the error is not the\r\nSMTP command stream.\n --VERIFIER NOTES-- \nThe code used was the clear choice of the working group, and can't be changed through the errata system.",
    "submit_date": "2014-08-13",
    "submitter_name": "D. Stussy",
    "verifier_id": 130,
    "verifier_name": "Barry Leiba",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 4453,
    "doc-id": "RFC7208",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Editorial",
    "section": "5.6.  \"ip4\"",
    "orig_text": "  ip4-cidr-length  = \"/\" (\"0\" / %x31-39 0*1DIGIT) ; value range 0-32\r\n  ip6-cidr-length  = \"/\" (\"0\" / %x31-39 0*2DIGIT) ; value range 0-128",
    "correct_text": "  ip4-cidr-length  = \"/\" (DIGIT / \r\n                          %x31-%x32 DIGIT /\r\n                          %x33 %x30-%x32) ; value range 0-32\r\n\r\n  ip6-cidr-length  = \"/\" (\"0\" /\r\n                          %31-%39 0*1DIGIT /\r\n                          \"1\" %30-%31 DIGIT /\r\n                          \"12\" %30-%38) ; value range 0-128",
    "notes": "As written the ABNF matches ranges 0-99 and 0-999, not the ranges in the comments.\r\nNote: I coded the ABNF the way that I did to avoid leading zeros.\r\n\r\n----- Verifier Notes -----\r\nThis isn't documenting an error: the ABNF was specified as it was intentionally, using the comments to restrict the range.  I'm marking this \"Held for Document Update\" in case we ever revise this and want to consider making the ABNF pickier.",
    "submit_date": "2015-08-24",
    "submitter_name": "Seymour J. Metz",
    "verifier_id": 130,
    "verifier_name": "Barry Leiba",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 4751,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": 5.5,
    "orig_text": "This mechanism matches if\r\n\r\no  the <target-name> is a subdomain of a validated domain name, or\r\n\r\no  the <target-name> and a validated domain name are the same.",
    "correct_text": "This mechanism matches if\r\n\r\no  a validated domain name is a subdomain of the <target-name>, or\r\n\r\no  the <target-name> and a validated domain name are the same.",
    "notes": "The first bullet point is in contradiction to the description of the ptr mechanism evaluation in the preceding paragraph:\r\n\"Check all validated domain names to see if they either match the <target-name> domain or are a subdomain of the <target-name> domain. If any do, this mechanism matches. If no validated domain name can be found, or if none of the validated domain names match or are a subdomain of the <target-name>, this mechanism fails to match.\"",
    "submit_date": "2016-07-27",
    "submitter_name": "Ken Mortimer",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 4841,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Editorial",
    "section": "3.5.",
    "orig_text": "      EXAMPLE.COM.          MX      10      A.EXAMPLE.COM\r\n      *.EXAMPLE.COM.        MX      10      A.EXAMPLE.COM\r\n      A.EXAMPLE.COM.        MX      10      A.EXAMPLE.COM\r\n      *.A.EXAMPLE.COM.      MX      10      A.EXAMPLE.COM\r\n\r\n",
    "correct_text": "      EXAMPLE.COM.          MX      10      A.EXAMPLE.COM.\r\n      *.EXAMPLE.COM.        MX      10      A.EXAMPLE.COM.\r\n      A.EXAMPLE.COM.        MX      10      A.EXAMPLE.COM.\r\n      *.A.EXAMPLE.COM.      MX      10      A.EXAMPLE.COM.\r\n",
    "notes": "This is an editorial errata, since it is a punctuation error.\r\n\r\nIt is not technical, because the example might have implied an $ORIGIN of \".\" or some other strange setting, while a normative reference --rfc 1035-- makes it very clear that \"[d]omain names that end in a dot are called absolute, and are taken as complete.\"  Hence no technical meaning is affected.",
    "submit_date": "2016-10-25",
    "submitter_name": "Alessandro Vesely",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 5227,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": 5.5,
    "orig_text": "   The <ip>'s name is looked up using this procedure:\r\n\r\n   o  Perform a DNS reverse-mapping for <ip>: Look up the corresponding\r\n      PTR record in \"in-addr.arpa.\" if the address is an IPv4 address\r\n      and in \"ip6.arpa.\" if it is an IPv6 address.\r\n\r\n   o  For each record returned, validate the domain name by looking up\r\n      its IP addresses.  To prevent DoS attacks, the PTR processing\r\n      limits defined in Section 4.6.4 MUST be applied.  If they are\r\n      exceeded, processing is terminated and the mechanism does not\r\n      match.\r\n\r\n   o  If <ip> is among the returned IP addresses, then that domain name\r\n      is validated.\r\n\r\n   Check all validated domain names to see if they either match the\r\n   <target-name> domain or are a subdomain of the <target-name> domain.\r\n   If any do, this mechanism matches.  If no validated domain name can\r\n   be found, or if none of the validated domain names match or are a\r\n   subdomain of the <target-name>, this mechanism fails to match.  If a\r\n   DNS error occurs while doing the PTR RR lookup, then this mechanism\r\n   fails to match.  If a DNS error occurs while doing an A RR lookup,\r\n   then that domain name is skipped and the search continues.\r\n\r\n   This mechanism matches if\r\n\r\n   o  the <target-name> is a subdomain of a validated domain name, or\r\n\r\n   o  the <target-name> and a validated domain name are the same.\r\n\r\n   For example, \"mail.example.com\" is within the domain \"example.com\",\r\n   but \"mail.bad-example.com\" is not.\r\n",
    "correct_text": "   The <ip>'s name is looked up using this procedure:\r\n\r\n   o  Perform a DNS reverse-mapping for <ip>: Look up the corresponding\r\n      PTR record in \"in-addr.arpa.\" if the address is an IPv4 address\r\n      and in \"ip6.arpa.\" if it is an IPv6 address.\r\n\r\n   Check all domain names to see if they either match the\r\n   <target-name> domain or are a subdomain of the <target-name>\r\n   domain.  If any do, this domain name can be validated.  If no\r\n   domain name can be found, or if none of the domain names match or\r\n   are a subdomain of the <target-name>, this mechanism fails to\r\n   match.  If a DNS error occurs while doing the PTR RR lookup, then\r\n   this mechanism fails to match.\r\n\r\n   This mechanism may match if\r\n\r\n   o  the <target-name> is a subdomain of a domain name, or\r\n\r\n   o  the <target-name> and a domain name are the same.\r\n\r\n   For example, \"mail.example.com\" is within the domain \"example.com\",\r\n   but \"mail.bad-example.com\" is not.\r\n\r\n\r\n   The domain names received must also be validated for the mechanism\r\n   to match.\r\n\r\n   o For each matched record, validate the domain name by looking up\r\n      its IP addresses.  To prevent DoS attacks, the PTR processing\r\n      limits defined in Section 4.6.4 MUST be applied.  If they are\r\n      exceeded, processing is terminated and the mechanism does not\r\n      match.\r\n\r\n   o  If <ip> is among the returned IP addresses, then that domain name\r\n      is validated.\r\n\r\n   If a DNS error occurs while doing an A RR lookup, then that domain\r\n   name is skipped and the search continues.\r\n\r\n\r\n   The mechanism matches if a domain name is found that properly\r\n   matches the target name and can be properly validated.  While these\r\n   tests can be done in either order, performing the match before\r\n   validating prevents needless DNS queries being performed.\r\n",
    "notes": "As specified, the RFC calls for all names to be validated, even those that can be immediately discarded because they do not match.   The RFC should call for the local-only operation to be done first.  While it may be argued that the RFC doesn't require the order, implementers shouldn't be misled.\r\n\r\nMy corrected text probably needs editorial work.\r\n\r\nI have not fixed errata 4751 in my corrected text.",
    "submit_date": "2018-01-04",
    "submitter_name": "David Garfield",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 5228,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": 5.5,
    "orig_text": "   Note: This mechanism is slow, it is not as reliable as other\r\n   mechanisms in cases of DNS errors, and it places a large burden on\r\n   the .arpa name servers.  If used, proper PTR records have to be in\r\n   place for the domain's hosts and the \"ptr\" mechanism SHOULD be one of\r\n   the last mechanisms checked.  After many years of SPF deployment\r\n   experience, it has been concluded that it is unnecessary and more\r\n   reliable alternatives should be used instead.  It is, however, still\r\n   in use as part of the SPF protocol, so compliant check_host()\r\n   implementations MUST support it.\r\n",
    "correct_text": "   Note: This mechanism is not as reliable as other\r\n   mechanisms in cases of DNS errors.\r\n   If used, proper PTR records have to be in\r\n   place for the domain's hosts and the \"ptr\" mechanism SHOULD be one of\r\n   the last mechanisms checked.  After many years of SPF deployment\r\n   experience, it has been concluded that it is unnecessary and more\r\n   reliable alternatives should be used instead.  It is, however, still\r\n   in use as part of the SPF protocol, so compliant check_host()\r\n   implementations MUST support it.\r\n",
    "notes": "I have not reflowed the text so it can be more clear what I changed.\r\n\r\n        This mechanism is slow\r\n\r\nIn fact, if all the DNS records are in place, Errata 5227 is accounted\r\nfor, and the single PTR query is discounted, this mechanism produces\r\nno more additional DNS queries than mechanism \"a\".  I.e. it produces\r\none A (or AAAA) query.  It is not slow.\r\n\r\n        it places a large burden on the .arpa name servers\r\n\r\nIn fact, it requires 1 PTR query, for however many ptr mechanisms are\r\nin the SPF record.  Further, most mail servers already do this PTR\r\nquery, to report the information on the \"Received\" line.  Even if a\r\nseperate daemon is used to the SPF check, the data should already be\r\nin a local caching name server.",
    "submit_date": "2018-01-04",
    "submitter_name": "David Garfield",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 5436,
    "doc-id": "RFC7208",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "GLOBAL",
    "orig_text": "    header-field     = \"Received-SPF:\" [CFWS] result FWS [comment FWS]\r\n                       [ key-value-list ] CRLF",
    "correct_text": "    header-field     = \"Received-SPF:\" [CFWS] result [ FWS comment ]\r\n                       [ FWS key-value-list ] [FWS] CRLF",
    "notes": "As specified, this ABNF doesn't allow a header field value like result-FWS-comment with no FWS or key-value-list following it, a header field value which occurs very often in Received-SPF header fields I see in practice.  (Note that FWS must contain at least one white space.)  The corrected ABNF better follows practice in implementations.",
    "submit_date": "2018-07-23",
    "submitter_name": "Peter Occil",
    "verifier_id": 116,
    "verifier_name": "Alexey Melnikov",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 5550,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "2.3.",
    "orig_text": "   Note that requirements for the domain presented in the EHLO or HELO\r\n   command are not always clear to the sending party, and SPF verifiers\r\n   have to be prepared for the identity to be an IP address literal (see\r\n   [RFC5321], Section 4.1.3) or simply be malformed.  This SPF check can\r\n   only be performed when the \"HELO\" string is a valid, multi-label\r\n   domain name.",
    "correct_text": null,
    "notes": "It looks like that those who have HELO <IP Address> or <malformed> will have result \"none\" (and pass) but those that have HELO <hostname> and have not yet published their hostname (A record) as allowed sender will get fail. This becomes a very common case for all messages which are DSNs. The whole idea that it is better to have your HELO malformed than a valid hostname which identifies the system is wrong. The point is to fight spam but you actually make it easier for spammers to just have the EHLO malformed and send with <> reverse-path rather than having some proper EHLO/HELO which is subject to other verifications like rDNS, etc.",
    "submit_date": "2018-11-09",
    "submitter_name": "Borislav Petrov",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 5843,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": 9.1,
    "orig_text": "Received-SPF: pass (mybox.example.org: domain of\r\n    myname@example.com designates 192.0.2.1 as permitted sender)\r\n       receiver=mybox.example.org; client-ip=192.0.2.1;\r\n       mechanism=ip4:192.0.2.1; envelope-from=\"myname@example.com\";\r\n       helo=foo.example.com;",
    "correct_text": "Received-SPF: pass (mybox.example.org: domain of\r\n    myname@example.com designates 192.0.2.1 as permitted sender)\r\n       receiver=mybox.example.org; client-ip=192.0.2.1;\r\n       mechanism=\"ip4:192.0.2.1\"; envelope-from=\"myname@example.com\";\r\n       helo=foo.example.com;",
    "notes": "There's an error in the last example of this section:\r\nBy the definition of key-value-pair, a \"value\" can only be a dot-atom or a quoted-string. \r\nThe string ip4:192.0.2.1 in the mechanism key is not a legal dot-atom, so it should be surrounded by double quotes, to be a quoted-string instead",
    "submit_date": "2019-08-22",
    "submitter_name": "Jesus Donaldo Osornio",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": 6216,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "A.4",
    "orig_text": "ptr._spf.example.com.  SPF  \"v=spf1 -ptr +all\"",
    "correct_text": "ptr._spf.example.com.  TXT  \"v=spf1 -ptr:example.com +all\"",
    "notes": "The example in appendix A.4, 'Multiple Requirements Example', does not\r\nwork as intended.\r\n\r\nIn the example, the SPF record at ptr._spf.example.com contains the\r\ndirective '-ptr'.\r\n\r\nWhen this directive is evaluated, the <target-name> is equal to\r\n'ptr._spf.example.com'. An input <ip> such as 192.0.2.10, which has a\r\nPTR record pointing to 'example.com', will fail to match, as that domain\r\nis not equal to nor a subdomain of 'ptr._spf.example.com'. In other\r\nwords, given the DNS setup of appendix A, there are no inputs that\r\nfulfil the requirement for matching this ptr mechanism.\r\n\r\nThe example can be fixed by supplying an appropriate <domain-spec>:\r\nreplace '-ptr' with '-ptr:example.com'.",
    "submit_date": "2020-06-26",
    "submitter_name": "David BÃ¼rgin",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": null
  },
  {
    "errata_id": 6432,
    "doc-id": "RFC7208",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": 4.4,
    "orig_text": "In accordance with how the records are published (see Section 3\r\nabove), a DNS query needs to be made for the <domain> name, querying\r\nfor type TXT only.",
    "correct_text": "?",
    "notes": "Request for clarification: Are CNAME indirections allowed or, in other words, do they have to be followed during record lookup? If yes, do they count towards the DNS lookup limits as defined in section 4.6.4? If yes, the following sentence has to be adapted as well: \"SPF implementations MUST limit the total number of those terms to 10 during SPF evaluation, to avoid unreasonable load on the DNS.\" If the answer to the first question is no, then this should be made clear in section 4.4.\r\n\r\nPlease note that whether using CNAMEs is a good or bad idea is irrelevant to my question. I also know that you can't add a CNAME record to an apex domain but SPF is not limited to such domains. I assume the answer/consensus will be the same for the initial, `a`,  `include`, `exists` and `redirect` lookups. If not, this should also be clarified, of course.\n --VERIFIER NOTES-- \n   Errata reports are not the place to ask questions.  An appropriate mailing list on which to discuss SPF is the <ietf-smtp> list.",
    "submit_date": "2021-02-17",
    "submitter_name": "Kaspar Etter",
    "verifier_id": 130,
    "verifier_name": "Barry Leiba",
    "update_date": "2021-02-17 08:12:18"
  },
  {
    "errata_id": 6433,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Editorial",
    "section": 3,
    "orig_text": "   Each SPF record is placed in the DNS tree at the owner name it\r\n   pertains to, not in a subdomain under the owner name.  This is\r\n   similar to how SRV records [RFC2782] are done.",
    "correct_text": "   Each SPF record is placed in the DNS tree at the owner name it\r\n   pertains to, not in a subdomain under the owner name.  This is\r\n   different from how SRV records [RFC2782] are done.",
    "notes": "SRV records are placed at specific subdomains, which is not the case for SPF records. (I've chosen Editorial instead of Technical because the meaning of this paragraph should be clear from the context and thus this feels more like a typo.)",
    "submit_date": "2021-02-17",
    "submitter_name": "Kaspar Etter",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": null
  },
  {
    "errata_id": 6595,
    "doc-id": "RFC7208",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "4.6.4",
    "orig_text": "As described at the end of Section 11.1, there may be cases where it\r\nis useful to limit the number of \"terms\" for which DNS queries return\r\neither a positive answer (RCODE 0) with an answer count of 0, or a\r\n\"Name Error\" (RCODE 3) answer.  These are sometimes collectively\r\nreferred to as \"void lookups\".  SPF implementations SHOULD limit\r\n\"void lookups\" to two.  An implementation MAY choose to make such a\r\nlimit configurable.  In this case, a default of two is RECOMMENDED.\r\nExceeding the limit produces a \"permerror\" result.",
    "correct_text": "-- Addition to the original paragraph --\r\n\r\nADMDs should be aware that the void lookup limit can easily be exceeded by using sender-specific macros (\"s\", \"l\", \"o\", \"i\", \"h\") in more than 2 terms.\r\n\r\nThe following example will lead to an permerror in the most implementations if the <ip> is not found in any of the lists:\r\n  v=spf1 exists:%{ir}.list1.example.net exists:%{ir}.list2.example.net exists:%{ir}.list3.example.net -all",
    "notes": "In addition to the above suggestion, I still see a contradiction between the \"void lookup limit\" and the \"exists\" mechanism. The functionality of \"exists\" includes (in my opinion) the negative response (RCODE 3). But the \"void lookup limit\" allows this to occur only twice. This limits the use of \"exists\" very much.\r\n\r\nAdmittedly: I have no good idea how to solve this. :-)",
    "submit_date": "2021-06-03",
    "submitter_name": "Benjamin Schwarze",
    "verifier_id": 99,
    "verifier_name": null,
    "update_date": null
  }
]
