[
  {
    "errata_id": "8198",
    "doc-id": "RFC9635",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "7.3.3.",
    "orig_text": "   The signer presents the signed object in compact form [RFC7515] in\r\n   the Detached-JWS header field.\r\n\r\n   In the following non-normative example, the JOSE header contains the\r\n   following parameters:\r\n\r\n   {\r\n       \"alg\": \"RS256\",\r\n       \"kid\": \"gnap-rsa\",\r\n       \"uri\": \"https://server.example.com/gnap\",\r\n       \"htm\": \"POST\",\r\n       \"typ\": \"gnap-binding-jwsd\",\r\n       \"created\": 1618884475\r\n   }\r\n\r\n   The request content is the following JSON object:\r\n\r\n   NOTE: '\\' line wrapping per RFC 8792\r\n\r\n   {\r\n       \"access_token\": {\r\n           \"access\": [\r\n               \"dolphin-metadata\"\r\n           ]\r\n       },\r\n       \"interact\": {\r\n           \"start\": [\"redirect\"],\r\n           \"finish\": {\r\n               \"method\": \"redirect\",\r\n               \"uri\": \"https://client.foo/callback\",\r\n               \"nonce\": \"VJLO6A4CAYLBXHTR0KRO\"\r\n           }\r\n       },\r\n       \"client\": {\r\n         \"key\": {\r\n           \"proof\": \"jwsd\",\r\n           \"jwk\": {\r\n               \"kid\": \"gnap-rsa\",\r\n               \"kty\": \"RSA\",\r\n               \"e\": \"AQAB\",\r\n               \"alg\": \"RS256\",\r\n               \"n\": \"hYOJ-XOKISdMMShn_G4W9m20mT0VWtQBsmBBkI2cmRt4Ai8Bf\\\r\n     YdHsFzAtYKOjpBR1RpKpJmVKxIGNy0g6Z3ad2XYsh8KowlyVy8IkZ8NMwSrcUIBZG\\\r\n     YXjHpwjzvfGvXH_5KJlnR3_uRUp4Z4Ujk2bCaKegDn11V2vxE41hqaPUnhRZxe0jR\\\r\n     ETddzsE3mu1SK8dTCROjwUl14mUNo8iTrTm4n0qDadz8BkPo-uv4BC0bunS0K3bA_\\\r\n     3UgVp7zBlQFoFnLTO2uWp_muLEWGl67gBq9MO3brKXfGhi3kOzywzwPTuq-cVQDyE\\\r\n     N7aL0SxCb3Hc4IdqDaMg8qHUyObpPitDQ\"\r\n           }\r\n         }\r\n         \"display\": {\r\n           \"name\": \"My Client Display Name\",\r\n           \"uri\": \"https://client.foo/\"\r\n         },\r\n       }\r\n   }\r\n\r\n   This is hashed to the following base64-encoded value:\r\n\r\n   PGiVuOZUcN1tRtUS6tx2b4cBgw9mPgXG3IPB3wY7ctc\r\n\r\n   This leads to the following full HTTP request message:\r\n\r\n   NOTE: '\\' line wrapping per RFC 8792\r\n\r\n   POST /gnap HTTP/1.1\r\n   Host: server.example.com\r\n   Content-Type: application/json\r\n   Content-Length: 983\r\n   Detached-JWS: eyJhbGciOiJSUzI1NiIsImNyZWF0ZWQiOjE2MTg4ODQ0NzUsImh0b\\\r\n     SI6IlBPU1QiLCJraWQiOiJnbmFwLXJzYSIsInR5cCI6ImduYXAtYmluZGluZytqd3\\\r\n     NkIiwidXJpIjoiaHR0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20vZ25hcCJ9.PGiVuO\\\r\n     ZUcN1tRtUS6tx2b4cBgw9mPgXG3IPB3wY7ctc.fUq-SV-A1iFN2MwCRW_yolVtT2_\\\r\n     TZA2h5YeXUoi5F2Q2iToC0Tc4drYFOSHIX68knd68RUA7yHqCVP-ZQEd6aL32H69e\\\r\n     9zuMiw6O_s4TBKB3vDOvwrhYtDH6fX2hP70cQoO-47OwbqP-ifkrvI3hVgMX9TfjV\\\r\n     eKNwnhoNnw3vbu7SNKeqJEbbwZfpESaGepS52xNBlDNMYBQQXxM9OqKJaXffzLFEl\\\r\n     -Xe0UnfolVtBraz3aPrPy1C6a4uT7wLda3PaTOVtgysxzii3oJWpuz0WP5kRujzDF\\\r\n     wX_EOzW0jsjCSkL-PXaKSpZgEjNjKDMg9irSxUISt1C1T6q3SzRgfuQ\r\n\r\n\r\n   {\r\n       \"access_token\": {\r\n           \"access\": [\r\n               \"dolphin-metadata\"\r\n           ]\r\n       },\r\n       \"interact\": {\r\n           \"start\": [\"redirect\"],\r\n           \"finish\": {\r\n               \"method\": \"redirect\",\r\n               \"uri\": \"https://client.foo/callback\",\r\n               \"nonce\": \"VJLO6A4CAYLBXHTR0KRO\"\r\n           }\r\n       },\r\n       \"client\": {\r\n         \"key\": {\r\n           \"proof\": \"jwsd\",\r\n           \"jwk\": {\r\n               \"kid\": \"gnap-rsa\",\r\n               \"kty\": \"RSA\",\r\n               \"e\": \"AQAB\",\r\n               \"alg\": \"RS256\",\r\n               \"n\": \"hYOJ-XOKISdMMShn_G4W9m20mT0VWtQBsmBBkI2cmRt4Ai8Bf\\\r\n     YdHsFzAtYKOjpBR1RpKpJmVKxIGNy0g6Z3ad2XYsh8KowlyVy8IkZ8NMwSrcUIBZG\\\r\n     YXjHpwjzvfGvXH_5KJlnR3_uRUp4Z4Ujk2bCaKegDn11V2vxE41hqaPUnhRZxe0jR\\\r\n     ETddzsE3mu1SK8dTCROjwUl14mUNo8iTrTm4n0qDadz8BkPo-uv4BC0bunS0K3bA_\\\r\n     3UgVp7zBlQFoFnLTO2uWp_muLEWGl67gBq9MO3brKXfGhi3kOzywzwPTuq-cVQDyE\\\r\n     N7aL0SxCb3Hc4IdqDaMg8qHUyObpPitDQ\"\r\n           }\r\n         }\r\n         \"display\": {\r\n           \"name\": \"My Client Display Name\",\r\n           \"uri\": \"https://client.foo/\"\r\n         },\r\n       }\r\n   }\r\n\r\n   When the verifier receives the Detached-JWS header, it MUST parse and\r\n   validate the JWS object.  The signature MUST be validated against the\r\n   expected key of the signer.  If the HTTP message request contains\r\n   content, the verifier MUST calculate the hash of the content just as\r\n   the signer does, with no normalization or transformation of the\r\n   request.  All required fields MUST be present, and their values MUST\r\n   be valid.  All fields MUST match the corresponding portions of the\r\n   HTTP message.  For example, the htm field of the JWS header has to be\r\n   the same as the HTTP verb used in the request.\r\n\r\n   Note that this proofing method depends on a specific cryptographic\r\n   algorithm, SHA-256, in two ways: 1) the ath hash algorithm is\r\n   hardcoded and 2) the payload of the detached/attached signature is\r\n   computed using a hardcoded hash.  A future version of this document\r\n   may address crypto-agility for both these uses by replacing ath with\r\n   a new header that upgrades the algorithm and possibly defining a new\r\n   JWS header that indicates the HTTP content's hash method.\r\n\r\n7.3.3.1.  Key Rotation Using Detached JWS\r\n\r\n   When rotating a key using detached JWS, the message, which includes\r\n   the new public key value or reference, is first signed with the old\r\n   key as described above using a JWS object with typ header value\r\n   \"gnap-binding-rotation-jwsd\".  The value of the JWS object is then\r\n   taken as the payload of a new JWS object, to be signed by the new key\r\n   using the parameters above.\r\n\r\n   The value of the new JWS object is sent in the Detached-JWS header.\r\n",
    "correct_text": "N/A",
    "notes": "This section standardises the use of the Detached-JWS HTTP header. This header was not registered in  the IANA Considerations section and is not a registered HTTP header.\r\n\r\nI am unsure what the best way to correct this ommission is.",
    "submit_date": "2024-12-04",
    "submitter_name": "Erin Shepherd",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": null
  }
]
