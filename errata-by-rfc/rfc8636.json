[
  {
    "errata_id": "8638",
    "doc-id": "RFC8636",
    "errata_status_code": "Verified",
    "errata_type_code": "Editorial",
    "section": "8.1",
    "orig_text": "ticket: Length =  55 bytes, Hex Representation =\r\n61353033 A0030201 05A1071B 0553552E 5345A210 300EA003 020101A1 0730051B\r\n036C6861 A311300F A0030201 12A20804 0668656A 68656A\r\n",
    "correct_text": "<no new text>",
    "notes": "This RFC was published based on draft-ietf-kitten-pkinit-alg-agility, which replaced draft-ietf-krb-wg-pkinit-alg-agility.  Versions of draft-ietf-krb-wg-pkinit-alg-agility through -04, inclusive, had a field in the OtherInfo type called 'ticket', and this is why the test vectors in section 8 still refer to 'ticket': it used to be an input to the KDF in an old version of the draft, but later it was dropped.  When the 'ticket' field of the OtherInfo type was dropped an oversight caused the 'ticket' input in section 8 not to also be dropped.",
    "submit_date": "2025-11-16",
    "submitter_name": "Nico Williams",
    "verifier_id": "173",
    "verifier_name": "Paul Wouters",
    "update_date": "2025-11-17 08:32:06"
  },
  {
    "errata_id": "8639",
    "doc-id": "RFC8636",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "6",
    "orig_text": "   o  The algorithm identifier (algorithmID) input parameter is the\r\n      identifier of the respective KDF.  For example, this is id-pkinit-\r\n      kdf-ah-sha1 if the KDF uses SHA-1 as the hash.",
    "correct_text": "   o  The algorithm identifier (algorithmID) input parameter is the\r\n      identifier of the respective KDF with absent parameters.  For\r\n      example, this is id-pkinit-kdf-ah-sha1 if the KDF uses SHA-1\r\n      as the hash.",
    "notes": "The negotiation of KDF in PKINIT as of RFC 8636 uses an exchange of OBJECT IDENTIFIER values, not AlgorithmIdentifier values, but when a value of the OtherInfo type is created and serialized we need to know what parameters to use for the algorithmID member of the OtherInfo value, and this is not specified anywhere.\r\n\r\nElsewhere in RFC 8636 we see this text:\r\n\r\n   The KDFAlgorithmId structure contains an object identifier that\r\n   identifies a KDF.  The algorithm of the KDF and its parameters are\r\n   defined by the corresponding specification of that KDF.\r\n\r\nbut the KDFs are all specified in RFC 8636 itself and no parameters are specified for the KDFs.  There is an reference to NIST.SP.800-56Ar3 in section 6 of RFC 8636:\r\n\r\n   The KDF algorithm described in this document (based on [SP80056A])\r\n   can be implemented using any cryptographic hash function.\r\n\r\nbut NIST.SP.800-56Ar3 does not specify parameters to the KDFs either.\r\n\r\nThe question then is: what shall the parameters be set to in the OtherInfo algorithmID identifying the KDF?  There are two options: exclude the parameters member (it is OPTIONAL after all), or include it with the DER encoding of NULL (common for some algorithms)?\r\n\r\nLooking at MIT Kerberos I believe the parameters member is left absent, therefore that is what implementators should do.",
    "submit_date": "2025-11-16",
    "submitter_name": "Nico Williams",
    "verifier_id": "173",
    "verifier_name": "Paul Wouters",
    "update_date": "2025-11-17 09:07:38"
  },
  {
    "errata_id": "8642",
    "doc-id": "RFC8636",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "8.4.2",
    "orig_text": "OLD:\r\n\r\n   key-material: Length = 24 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6\r\n\r\n   key: Length = 32 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6",
    "correct_text": "NEW:\r\n\r\n   key-material: Length = 21 bytes, Hex Representation =\r\n   D3C78B78 D75313E9 A926F75D FB012363 FA17FA01 DB\r\n\r\n   key: Length = 24 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6",
    "notes": "This erratum supersedes https://www.rfc-editor.org/errata/eid8640.",
    "submit_date": "2025-11-18",
    "submitter_name": "Nico Williams",
    "verifier_id": "173",
    "verifier_name": "Paul Wouters",
    "update_date": "2025-11-19 08:52:27"
  },
  {
    "errata_id": "8643",
    "doc-id": "RFC8636",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Technical",
    "section": "GLOBAL",
    "orig_text": "9.  Security Considerations\r\n",
    "correct_text": "Section 8.5 Test Vector for SHA-384, enctype 16\r\n\r\n8.5.1.  Specific Inputs\r\n\r\n   algorithm-id: (id-pkinit-kdf-ah-sha384) Length = 8 bytes, Hex\r\n   Representation = 2B060105 02030604\r\n\r\n   enctype: (aes256-cts-hmac-sha1-96) Length = 1 byte, Decimal\r\n   Representation = 18\r\n\r\n8.5.2.  Outputs\r\n\r\n   key-material: Length = 32 bytes, Hex Representation =\r\n   2DA9824C A429CCDA EB553A09 72734673 0A0A6C6A 89A01B3C 2E4987FC 70800DA2\r\n\r\n   key: Length = 32 bytes, Hex Representation =\r\n   2DA9824C A429CCDA EB553A09 72734673 0A0A6C6A 89A01B3C 2E4987FC 70800DA2\r\n\r\n9.  Security Considerations\r\n",
    "notes": "RFC 8636 specifies several KDFs, but for one of them it provides no test vectors.  This erratum corrects that oversight.  See posts on the KITTEN WG mailing list for confirmation that two implementations agree on this new test vector.\r\n\r\nPerhaps an erratum is not an acceptable way to add test vectors to an RFC, in which case feel free to reject this erratum.",
    "submit_date": "2025-11-18",
    "submitter_name": "Nico Williams",
    "verifier_id": "173",
    "verifier_name": "Paul Wouters",
    "update_date": "2025-11-19 08:53:25"
  },
  {
    "errata_id": "8651",
    "doc-id": "RFC8636",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "8.4.2",
    "orig_text": "   key-material: Length = 24 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6\r\n\r\n   key: Length = 32 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6\r\n",
    "correct_text": "   key-material: Length = 24 bytes, Hex Representation =\r\n   D3C78B78 D75313E9 A926F75D FB012363 FA17FA01 DB20F24E\r\n\r\n   key: Length = 32 bytes, Hex Representation =\r\n   D3C78A79 D65213EF E9A826F7 5DFB01F7 2362FB16 FB01DAD6\r\n",
    "notes": "The Kerberos random2key function (see RFCs 3961 and 3962) is the identity function for the AES enctypes, but for 3DES it is not.  The \"key-material\" output is supposed to the output of the KDF prior to application of the Kerberos random2key function.  The third test vector in section 8 (\"Test Vector for SHA-512, enctype 16\"), the one in section 8.4, is for the 3DES enctype because enctype 16 is the KRB5_ENCTYPE_DES3_CBC_SHA1 enctype (see RFCs 4120 and 3961), and as you can see the expected key length is 24 bytes (as expected for a 3DES-based enctype).\r\n\r\nTherefore the \"key-material\" output in section 8.4.2 can be expected to differ from the \"key\" output.  And in my (work in progress) code in Heimdal for implementing RFC 8636 so it is.  The key-material in the corrected text is the correct key material, though I should also check this in MIT Kerberos.",
    "submit_date": "2025-11-17",
    "submitter_name": "Nico Williams",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": null
  },
  {
    "errata_id": "8660",
    "doc-id": "RFC8636",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "5",
    "orig_text": "5.  X.509 Certificate Signer Algorithm Agility\r\n\r\n   Section 3.2.2 of [RFC4556] is updated to add optional typed data to\r\n   the KDC_ERR_DIGEST_IN_CERT_NOT_ACCEPTED error.  When a KDC conforming\r\n   to this specification returns this error, it MAY send a list of\r\n   digest algorithms acceptable to the KDC for use by the certification\r\n   authority (CA) in signing the client's X.509 certificate in\r\n   decreasing order of preference.  This is accomplished by including a\r\n   TD_CERT_DIGEST_ALGORITHMS typed data element in the error data.  The\r\n   corresponding data contains the ASN.1 DER encoding of the TD-CERT-\r\n   DIGEST-ALGORITHMS-DATA structure defined as follows:\r\n\r\n   td-cert-digest-algorithms INTEGER ::= 112\r\n\r\n   TD-CERT-DIGEST-ALGORITHMS-DATA ::= SEQUENCE {\r\n           allowedAlgorithms [0] SEQUENCE OF AlgorithmIdentifier,\r\n                      -- Contains the list of CMS algorithm [RFC5652]\r\n                      -- identifiers indicating the digest algorithms\r\n                      -- that are used by the CA to sign the client's\r\n                      -- X.509 certificate and are acceptable to the KDC\r\n                      -- in the process of validating the client's X.509\r\n                      -- certificate in decreasing order of\r\n                      -- preference.\r\n           rejectedAlgorithm [1] AlgorithmIdentifier OPTIONAL,\r\n                      -- This identifies the digest algorithm that was\r\n                      -- used to sign the client's X.509 certificate and\r\n                      -- has been rejected by the KDC in the process of\r\n                      -- validating the client's X.509 certificate\r\n                      -- [RFC5280].\r\n           ...\r\n   }\r\n\r\n   The KDC fills in the allowedAlgorithm field with the list of\r\n   algorithm [RFC5652] identifiers indicating digest algorithms that are\r\n   used by the CA to sign the client's X.509 certificate and are\r\n   acceptable to the KDC in the process of validating the client's X.509\r\n   certificate in decreasing order of preference.  The rejectedAlgorithm\r\n   field identifies the signing algorithm for use in signing the\r\n   client's X.509 certificate that has been rejected by the KDC in the\r\n   process of validating the client's certificate [RFC5280].\r\n",
    "correct_text": "5.  X.509 Certificate Signer Algorithm Agility\r\n\r\n   Section 3.2.2 of [RFC4556] is updated to add optional typed data to\r\n   the KDC_ERR_DIGEST_IN_CERT_NOT_ACCEPTED error.  When a KDC conforming\r\n   to this specification returns this error, it MAY send a list of\r\n   signature and/or digest algorithms acceptable to the KDC for use by the certification\r\n   authority (CA) in signing the client's X.509 certificate in\r\n   decreasing order of preference.  This is accomplished by including a\r\n   TD_CERT_DIGEST_ALGORITHMS typed data element in the error data.  The\r\n   corresponding data contains the ASN.1 DER encoding of the TD-CERT-\r\n   DIGEST-ALGORITHMS-DATA structure defined as follows:\r\n\r\n   td-cert-digest-algorithms INTEGER ::= 112\r\n\r\n   TD-CERT-DIGEST-ALGORITHMS-DATA ::= SEQUENCE {\r\n           allowedAlgorithms [0] SEQUENCE OF AlgorithmIdentifier,\r\n                      -- Contains the list of CMS algorithm [RFC5652]\r\n                      -- identifiers indicating the signature and/or digest algorithms\r\n                      -- that are used by the CA to sign the client's\r\n                      -- X.509 certificate and are acceptable to the KDC\r\n                      -- in the process of validating the client's X.509\r\n                      -- certificate in decreasing order of\r\n                      -- preference.\r\n           rejectedAlgorithm [1] AlgorithmIdentifier OPTIONAL,\r\n                      -- This identifies the signature or digest algorithm that was\r\n                      -- used to sign the client's X.509 certificate and\r\n                      -- has been rejected by the KDC in the process of\r\n                      -- validating the client's X.509 certificate\r\n                      -- [RFC5280].\r\n           ...\r\n   }\r\n\r\n   The KDC fills in the allowedAlgorithm field with the list of\r\n   algorithm [RFC5652] identifiers indicating signature and/or digest algorithms that are\r\n   used by the CA to sign the client's X.509 certificate and are\r\n   acceptable to the KDC in the process of validating the client's X.509\r\n   certificate in decreasing order of preference.  The rejectedAlgorithm\r\n   field identifies the signing algorithm for use in signing the\r\n   client's X.509 certificate that has been rejected by the KDC in the\r\n   process of validating the client's certificate [RFC5280].\r\n",
    "notes": "Not all signature algorithms involve a digest algorithm!  At least one PQ algorithm, and also EdDSA (ED25519, Ed448), do not.  This is a problem we're also facing with RFC 5929's tls-server-end-point channel bindings type as well.  Here fortunately we have an easy fix: just allow the KDC to list not just _disgest_ algorithms but also _signature_ algorithms.\r\n\r\nPerhaps this is too much change to make via errata, but it's very small, and I don't think we should have to publish a new RFC for this.  Also, this is quite an obvious change, and it's certainly backwards-compatible and interoperable since a PKINIT client wouldn't refuse to continue due to seeing AlgorithmIdentifiers for algorithms other than digests in the KDC's TD-CERT-DIGEST-ALGORITHMS-DATA e-data.  Currently neither MIT Kerberos nor Heimdal have any support for this part of RFC 8636 anyways (they ignore the TD-CERT-DIGEST-ALGORITHMS-DATA e-data), but this functionality would be useful in the event that the user has multiple certificates to choose from, all with different signature algorithms yet all for the same user ID, and this could easily become a critical feature in due time.",
    "submit_date": "2025-11-28",
    "submitter_name": "Nico Williams",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": null
  }
]
