[
  {
    "errata_id": "3805",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "3",
    "orig_text": "    Message Length\r\n\r\n      The Message Length field is three octets and indicates the length\r\n      of the Diameter message including the header fields and the padded\r\n      AVPs.  Thus, the Message Length field is always a multiple of 4.",
    "correct_text": "    Message Length\r\n\r\n      The Message Length field is three octets and indicates the number\r\n      of octets of the Diameter message, including the header fields and\r\n      the padded AVPs.  Thus, the Message Length field is always a \r\n      multiple of 4 octets.\r\n",
    "notes": "the actual text does not indicate the unit of length unit, which may lead to confusion and IOT issues, especially if someone considers bits instead of bytes.",
    "submit_date": "2013-11-18",
    "submitter_name": "Lionel",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "3806",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "2.7",
    "orig_text": "   Server Identifier\r\n\r\n      The identity of one or more servers to which the message is to be\r\n      routed.  This identity MUST also be present in the Host Identity\r\n      field of the peer table (Section 2.6).  When the Local Action is\r\n      set to RELAY or PROXY, this field contains the identity of the\r\n      server(s) to which the message MUST be routed.  When the Local\r\n      Action field is set to REDIRECT, this field contains the identity\r\n      of one or more servers to which the message MUST be redirected.\r\n",
    "correct_text": "   Peer Identifier\r\n\r\n      The identity of one or more peers to which the message is to be\r\n      routed.  This identity MUST also be present in the Host Identity\r\n      field of the peer table (Section 2.6).  When the Local Action is\r\n      set to RELAY or PROXY, this field contains the identity of the\r\n      peer(s) to which the message MUST be routed.  When the Local\r\n      Action field is set to REDIRECT, this field contains the identity\r\n      of one or more peers to which the message MUST be redirected.\r\n",
    "notes": "The host identified in a Routing Table entry is not necessarily a \"server\". It can also be a Relay, a redirect or a proxy agent. Using \"peer\" instead of \"server\" is more appropriate.",
    "submit_date": "2013-11-18",
    "submitter_name": "Lionel",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "3942",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "8",
    "orig_text": "   When a Diameter server authorizes a user to implement network\r\n   resources for a finite amount of time, and it is willing to extend\r\n   the authorization via a future request, it MUST add the\r\n   Authorization- Lifetime AVP to the answer message.",
    "correct_text": "   When a Diameter server authorizes a user to implement network\r\n   resources for a finite amount of time, and it is willing to extend\r\n   the authorization via a future request, it MUST add the\r\n   Authorization-Lifetime AVP to the answer message.",
    "notes": "Authorization-Lifetime was mispelled",
    "submit_date": "2014-04-01",
    "submitter_name": "Benoit Claise",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "3997",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "GLOBAL",
    "orig_text": "Section 2.1.\r\n\r\n   The base Diameter protocol is run on port 3868 for both TCP [RFC0793]\r\n   and SCTP [RFC4960].  For TLS [RFC5246] and Datagram Transport Layer\r\n   Security (DTLS) [RFC6347], a Diameter node that initiates a\r\n   connection prior to any message exchanges MUST run on port 5658.  It\r\n   is assumed that TLS is run on top of TCP when it is used, and DTLS is\r\n   run on top of SCTP when it is used.\r\n\r\n   If the Diameter peer does not support receiving TLS/TCP and DTLS/SCTP\r\n   connections on port 5658 (i.e., the peer complies only with RFC\r\n   3588), then the initiator MAY revert to using TCP or SCTP on port\r\n   3868.  Note that this scheme is kept only for the purpose of backward\r\n   compatibility and that there are inherent security vulnerabilities\r\n   when the initial CER/CEA messages are sent unprotected (see\r\n   Section 5.6).\r\n\r\n   Diameter clients MUST support either TCP or SCTP; agents and servers\r\n   SHOULD support both.\r\n\r\n   A Diameter node MAY initiate connections from a source port other\r\n   than the one that it declares it accepts incoming connections on, and\r\n   it MUST always be prepared to receive connections on port 3868 for\r\n   TCP or SCTP and port 5658 for TLS/TCP and DTLS/SCTP connections.\r\n   When DNS-based peer discovery (Section 5.2) is used, the port numbers\r\n   received from SRV records take precedence over the default ports\r\n   (3868 and 5658).\r\n\r\nSection 4.3.1.\r\n\r\n      port               = \":\" 1*DIGIT\r\n\r\n                      ; One of the ports used to listen for\r\n                      ; incoming connections.\r\n                      ; If absent, the default Diameter port\r\n                      ; (3868) is assumed if no transport\r\n                      ; security is used and port 5658 when\r\n                      ; transport security (TLS/TCP and DTLS/SCTP)\r\n                      ; is used.",
    "correct_text": "Section 2.1.\r\n\r\n   The base Diameter protocol is run on port 3868 for both TCP [RFC0793]\r\n   and SCTP [RFC4960].  For TLS [RFC5246] and Datagram Transport Layer\r\n   Security (DTLS) [RFC6347], a Diameter node that initiates a\r\n   connection prior to any message exchanges MUST run on port 5868.  It\r\n   is assumed that TLS is run on top of TCP when it is used, and DTLS is\r\n   run on top of SCTP when it is used.\r\n\r\n   If the Diameter peer does not support receiving TLS/TCP and DTLS/SCTP\r\n   connections on port 5868 (i.e., the peer complies only with RFC\r\n   3588), then the initiator MAY revert to using TCP or SCTP on port\r\n   3868.  Note that this scheme is kept only for the purpose of backward\r\n   compatibility and that there are inherent security vulnerabilities\r\n   when the initial CER/CEA messages are sent unprotected (see\r\n   Section 5.6).\r\n\r\n   Diameter clients MUST support either TCP or SCTP; agents and servers\r\n   SHOULD support both.\r\n\r\n   A Diameter node MAY initiate connections from a source port other\r\n   than the one that it declares it accepts incoming connections on, and\r\n   it MUST always be prepared to receive connections on port 3868 for\r\n   TCP or SCTP and port 5868 for TLS/TCP and DTLS/SCTP connections.\r\n   When DNS-based peer discovery (Section 5.2) is used, the port numbers\r\n   received from SRV records take precedence over the default ports\r\n   (3868 and 5868).\r\n\r\nSection 4.3.1.\r\n\r\n      port               = \":\" 1*DIGIT\r\n\r\n                      ; One of the ports used to listen for\r\n                      ; incoming connections.\r\n                      ; If absent, the default Diameter port\r\n                      ; (3868) is assumed if no transport\r\n                      ; security is used and port 5868 when\r\n                      ; transport security (TLS/TCP and DTLS/SCTP)\r\n                      ; is used.",
    "notes": "RFC 6733 defined the Diameter port number for secure transport in IANA considerations Section 11.4. to be 5868. This is also in IANA port numbers registry \"Service Name and Transport Protocol Port Number Registry\". However, the RFC 6733 body text uses different port number in Sections 2.1. and 4.3.1. for secure transports. Since the IANA registry already contains the port number 5868 instead of the body text used value 5658, the values in Sections 2.1. and 4.3.1. should be 5868 instead of 5658.",
    "submit_date": "2014-05-24",
    "submitter_name": "Jouni Korhonen",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4209",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "5.4.3",
    "orig_text": "      BUSY                              1\r\n         The peer’s internal resources are constrained, and it has\r\n         determined that the transport connection needs to be closed.\r\n         A receiver of a DPR with above result code SHOULD NOT attempt\r\n         reconnection.",
    "correct_text": "      BUSY                              1\r\n         The peer’s internal resources are constrained, and it has\r\n         determined that the transport connection needs to be closed.\r\n         A receiver of a DPR with above result code SHOULD either \r\n         connect to an alternate node, or attempt reconnection\r\n         after a time period.",
    "notes": "In most implementations, the Diameter node will continue to serve its peer after the resources recover and expect reconnection. If the Diameter node won't like reconnection from peer, DO_NOT_WANT_TO_TALK_TO_YOU can be used instead of BUSY.\n --VERIFIER NOTES-- \nThe text describing the \"BUSY\" and \"DO_NOT_WANT_TO_TALK_TO_YOU\" cases is consistent with the text found in the introduction of the section 5.4.\r\n\r\n  \"In the event that the\r\n   disconnect was a result of either a shortage of internal resources or\r\n   simply that the node in question has no intentions of forwarding any\r\n   Diameter messages to the peer in the foreseeable future, a periodic\r\n   connection request would not be welcomed.  The Disconnection-Reason\r\n   AVP contains the reason the Diameter node issued the Disconnect-Peer-\r\n   Request message.\r\n\r\n   The Disconnect-Peer-Request message is used by a Diameter node to\r\n   inform its peer of its intent to disconnect the transport layer and\r\n   that the peer shouldn't reconnect unless it has a valid reason to do\r\n   so (e.g., message to be forwarded). \" \r\n\r\nSo the main purpose for sending a DPR with the causes \"BUSY\" and \"DO_NOT_WANT_TO_TALK_TO_YOU\" is actually to avoid the periodic reconnection attempts governed by the Tc timer.\r\nThese exceptions are mentioned in the section 2.1:\r\n\r\n  \"When no transport connection exists with a peer, an attempt to\r\n   connect SHOULD be made periodically.  This behavior is handled via\r\n   the Tc timer (see Section 12 for details), whose recommended value is\r\n   30 seconds.  There are certain exceptions to this rule, such as when\r\n   a peer has terminated the transport connection stating that it does\r\n   not wish to communicate.\"\r\n\r\nNow, it is true that there is no clear guideline on how to behave when receiving the cause \"BUSY\" and this explains why some implementations in the field still attempt to re-open the connection, as after a normal transport failure detection. But it does not mean that the text in the RFC6733 is wrong.\r\n\r\nFinally, if it is an attempt to clarify/modify the behavior of the peer receiving DPR with the \"BUSY\" cause, I don't think that using errata would be the most appropriate way. ",
    "submit_date": "2014-12-25",
    "submitter_name": "Hans Liu",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4210",
    "doc-id": "RFC6733",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Editorial",
    "section": "5.4.3",
    "orig_text": "   The Disconnect-Cause AVP (AVP Code 273) is of type Enumerated.  A\r\n   Diameter node MUST include this AVP in the Disconnect-Peer-Request\r\n   message to inform the peer of the reason for its intention to shut\r\n   down the transport connection.  The following values are supported:\r\n      REBOOTING                         0\r\n         A scheduled reboot is imminent.  A receiver of a DPR with\r\n         above result code MAY attempt reconnection.\r\n      BUSY                              1\r\n         The peer’s internal resources are constrained, and it has\r\n         determined that the transport connection needs to be closed.\r\n         A receiver of a DPR with above result code SHOULD NOT attempt\r\n         reconnection.\r\n      DO_NOT_WANT_TO_TALK_TO_YOU        2\r\n         The peer has determined that it does not see a need for the\r\n         transport connection to exist, since it does not expect any\r\n         messages to be exchanged in the near future.  A receiver of a\r\n         DPR with above result code SHOULD NOT attempt reconnection.",
    "correct_text": "   The Disconnect-Cause AVP (AVP Code 273) is of type Enumerated.  A\r\n   Diameter node MUST include this AVP in the Disconnect-Peer-Request\r\n   message to inform the peer of the reason for its intention to shut\r\n   down the transport connection.  The following values are supported:\r\n      REBOOTING                         0\r\n         A scheduled reboot is imminent.  A receiver of a DPR with\r\n         above result code MAY attempt reconnection.\r\n      BUSY                              1\r\n         The internal resources are constrained, and it has\r\n         determined that the transport connection needs to be closed.\r\n         A receiver of a DPR with above result code SHOULD NOT attempt\r\n         reconnection.\r\n      DO_NOT_WANT_TO_TALK_TO_YOU        2\r\n         The node has determined that it does not see a need for the\r\n         transport connection to exist, since it does not expect any\r\n         messages to be exchanged in the near future.  A receiver of a\r\n         DPR with above result code SHOULD NOT attempt reconnection.",
    "notes": "A peer can either be a sender or receiver, depending on the contexst.\r\n\r\nHowever in same section describing usage for the same AVP (description for cause), the 1st appearance represents the role of receiver, the 2nd and 3rd appearances has changed to the role of senders, it's confusing literally.",
    "submit_date": "2014-12-25",
    "submitter_name": "Hans Liu",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4234",
    "doc-id": "RFC6733",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Editorial",
    "section": "5.4",
    "orig_text": "In the last sentence of first paragraph odf the section 5.4, it is said:\r\n\r\n   When a Diameter node disconnects one of its transport connections,\r\n   its peer cannot know the reason for the disconnect and will most\r\n   likely assume that a connectivity problem occurred or that the peer\r\n   has rebooted.  In these cases, the peer may periodically attempt to\r\n   reconnect, as stated in Section 2.1.  In the event that the\r\n   disconnect was a result of either a shortage of internal resources or\r\n   simply that the node in question has no intentions of forwarding any\r\n   Diameter messages to the peer in the foreseeable future, a periodic\r\n   connection request would not be welcomed.  The Disconnection-Reason\r\n   AVP contains the reason the Diameter node issued the Disconnect-Peer-\r\n   Request message.",
    "correct_text": "the sentence should be:\r\n\r\n\r\n   When a Diameter node disconnects one of its transport connections,\r\n   its peer cannot know the reason for the disconnect and will most\r\n   likely assume that a connectivity problem occurred or that the peer\r\n   has rebooted.  In these cases, the peer may periodically attempt to\r\n   reconnect, as stated in Section 2.1.  In the event that the\r\n   disconnect was a result of either a shortage of internal resources or\r\n   simply that the node in question has no intentions of forwarding any\r\n   Diameter messages to the peer in the foreseeable future, a periodic\r\n   connection request would not be welcomed.  The Disconnect-Cause AVP\r\n   contains the reason the Diameter node issued the Disconnect-Peer-\r\n   Request message.",
    "notes": "The correct name of the AVP is \"Disconnect-Cause AVP\" and not \"Disconnection-Reason AVP\" that does not exist.",
    "submit_date": "2015-01-16",
    "submitter_name": "Lionel Morand",
    "verifier_id": "141",
    "verifier_name": "Kathleen Moriarty",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4462",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "6.1.4 6.1.6",
    "orig_text": "6.1.4.  Processing Local Requests\r\n\r\n   A request is known to be for local consumption when one of the\r\n   following conditions occurs:\r\n\r\n   o  The Destination-Host AVP contains the local host's identity;\r\n\r\n   o  The Destination-Host AVP is not present, the Destination-Realm AVP\r\n      contains a realm the server is configured to process locally, and\r\n      the Diameter application is locally supported; or\r\n\r\n   o  Both the Destination-Host and the Destination-Realm are not\r\n      present.\r\n\r\n6.1.6.  Request Routing\r\n\r\n   Diameter request message routing is done via realms and Application\r\n   Ids. A Diameter message that may be forwarded by Diameter agents\r\n   (proxies, redirect agents, or relay agents) MUST include the target\r\n   realm in the Destination-Realm AVP.  Request routing SHOULD rely on\r\n   the Destination-Realm AVP and the Application Id present in the\r\n   request message header to aid in the routing decision.  The realm MAY\r\n   be retrieved from the User-Name AVP, which is in the form of a\r\n   Network Access Identifier (NAI).  The realm portion of the NAI is\r\n   inserted in the Destination-Realm AVP.\r\n\r\n   Diameter agents MAY have a list of locally supported realms and\r\n   applications, and they MAY have a list of externally supported realms\r\n   and applications.  When a request is received that includes a realm\r\n   and/or application that is not locally supported, the message is\r\n   routed to the peer configured in the routing table (see Section 2.7).\r\n\r\n   Realm names and Application Ids are the minimum supported routing\r\n   criteria, additional information may be needed to support redirect\r\n   semantics.",
    "correct_text": "6.1.6 -\r\n  When a request is received that includes a realm\r\n   and/or application that is not locally supported, the message is\r\n   routed to the peer configured\r\n\r\nconflicts with 6.1.4 -\r\n   The Destination-Host AVP is not present, the Destination-Realm AVP\r\n      contains a realm the server is configured to process locally, and\r\n      the Diameter application is locally supported\r\n",
    "notes": "please guide if 6.1.4 Local processing - \"hostname not present\" needs to be amended by \"not present in host peer routing table\". otherwise it conflicts with 6.1.6.\n --VERIFIER NOTES-- \nDIME WG chairs report this is erroneous.",
    "submit_date": "2015-09-01",
    "submitter_name": "Keshab Upadhya",
    "verifier_id": "128",
    "verifier_name": "Stephen Farrell",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4463",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "6.1.7",
    "orig_text": "6.1.7.  Predictive Loop Avoidance",
    "correct_text": "6.1.7.  Predictive Loop Detection and termination",
    "notes": "one full cycle of loop execution happens before route record is identified and loop being realized. A scenario example where two Diameter Agents are configured to do precedence based routing to two different hss and where as if hss otherwise does loadshare using 4 different links each in such cases loop can even be reach stage 2 before being realized therefore it doesn't qualify the avoidance or prevention rather detection and termination. thanks.\n --VERIFIER NOTES-- \n\r\nThere is no need or benefit from this change.",
    "submit_date": "2015-09-01",
    "submitter_name": "Keshab Upadhya",
    "verifier_id": "128",
    "verifier_name": "Stephen Farrell",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4473",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "6.1.4",
    "orig_text": "6.1.4.  Processing Local Requests\r\n\r\nThe Destination-Host AVP is not present, the Destination-Realm AVP\r\ncontains a realm the server is configured to process locally, and\r\nthe Diameter application is locally supported; or\r\n",
    "correct_text": "6.1.4.  Processing Local Requests\r\n\r\nThe Destination-Host AVP is not present in peer routing table, \r\nthe Destination-Realm AVP contains a realm the server is \r\nconfigured to process locally, and \r\nthe Diameter application is locally supported; or\r\n",
    "notes": "6.1.4 - Processing Local Requests\r\n\r\n      The Destination-Host AVP is not present, the Destination-Realm AVP\r\n      contains a realm the server is configured to process locally, and\r\n      the Diameter application is locally supported\r\n\r\n6.1.6 - Request Routing\r\n\r\n   When a request is received that includes a realm\r\n   and/or application that is not locally supported, the message is\r\n   routed to the peer configured\r\n\r\nAs given above 6.1.4 second rule contradicts with 6.1.6 para 2.\n --VERIFIER NOTES-- \n   DIME chairs recommended reject",
    "submit_date": "2015-09-14",
    "submitter_name": "Keshab Upadhya",
    "verifier_id": "128",
    "verifier_name": "Stephen Farrell",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4615",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "7.1.5",
    "orig_text": "   DIAMETER_AVP_UNSUPPORTED 5001\r\n\r\n      The peer received a message that contained an AVP that is not\r\n      recognized or supported and was marked with the 'M' (Mandatory)\r\n      bit.  A Diameter message with this error MUST contain one or more\r\n      Failed-AVP AVPs containing the AVPs that caused the failure.",
    "correct_text": "   DIAMETER_AVP_UNSUPPORTED 5001\r\n\r\n      The peer received a message that contained an AVP that is not\r\n      recognized or supported and was marked with the 'M' (Mandatory)\r\n      bit.  A Diameter message with this error MUST contain one \r\n      Failed-AVP AVP containing the AVPs that caused the failure.",
    "notes": "The RFC6733 has clarified that only one instance of Failed-AVP AVP can be present in the command answer. One Failed-AVP AVP is enough because this AVP is defined as Grouped AVP that can contain multiple AVPs. In the present case, each of the nested AVPs in the Failed-AVP AVP are the AVPs that caused the failure.",
    "submit_date": "2016-02-05",
    "submitter_name": "Lionel Morand",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4803",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Editorial",
    "section": "3.2",
    "orig_text": "In section 3.2\r\n\r\n      header           = \"<Diameter-Header:\" command-id\r\n\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\n\r\nIn section 3.4\r\n\r\n         header           = \"<\" \"AVP-Header:\" avpcode [vendor] \">\"",
    "correct_text": "In section 3.2\r\n\r\n      header           = \"<Diameter Header:\" command-id\r\n\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\nIn section 3.4\r\n\r\n         header           = \"<\" \"AVP Header:\" avpcode [vendor] \">\"",
    "notes": "Background:\r\nThere was an initial errata (kept for background information at the bottom of this note). After some discussion with the dime WG, this errata was modified.\r\n\r\n This errata report is correct on the inconsistency regarding the definition of the command header and AVP header and how they are used in the rest of the document in the ABNF description of commands and Grouped AVPs.\r\n\r\n \r\n\r\nFor commands, the header is defined as follow:\r\n\r\n \r\n\r\n   header           = \"<Diameter-Header:\" command-id\r\n\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\n \r\n\r\nwhereas \"<Diameter Header:\" is used when defining commands.\r\n\r\n \r\n\r\nSame for Grouped AVP. It is defined as follow:\r\n\r\n \r\n\r\n         header           = \"<\" \"AVP-Header:\" avpcode [vendor] \">\"\r\n\r\n \r\n\r\nwhereas \"<AVP Header:\" is used when defining Grouped AVPs.\r\n\r\n \r\n\r\nConsidering that most (if not all) the ABNF descriptions have been copied from the commands and Grouped AVPs defined in the RFC3588 or RFC6733, I would be in favor to correct the specification by modifying the definition of the headers, i.e.\r\n\r\n \r\n\r\n--> In section 3.2.  Command Code Format Specification\r\n\r\n \r\n\r\nOLD:\r\n\r\n \r\n\r\n   header           = \"<Diameter-Header:\" command-id\r\n\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\n \r\n\r\nNEW:\r\n\r\n \r\n\r\n   header           = \"<Diameter Header:\" command-id\r\n\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\n \r\n\r\n \r\n\r\n--> And in section 4.4\r\n\r\n \r\n\r\nOLD:\r\n\r\n \r\n\r\n         header           = \"<\" \"AVP-Header:\" avpcode [vendor] \">\"\r\n\r\n \r\n\r\nNEW:\r\n\r\n \r\n\r\n         header           = \"<\" \"AVP Header:\" avpcode [vendor] \">\"\r\n\r\n=============================================================================\r\n\r\nThis initial errata is below:\r\nOriginal text:\r\n   Example-Request ::= < Diameter Header: 9999999, REQ, PXY >\r\n                       { User-Name }\r\n                    1* { Origin-Host }\r\n                     * [ AVP ]\r\n\r\nCorrected text:\r\n   <Example-Request> ::= < Diameter-Header: 9999999, REQ, PXY >\r\n                       { User-Name }\r\n                    1* { Origin-Host }\r\n                     * [ AVP ]\r\n\r\nI converted the BNF into a PetitParser parser in Smalltalk/Pharo and noticed that example and grammar do not match. The first issue is with the example following the grammar but most definitions do not follow the BNF so maybe it is best to update the BNF. \r\n\r\n  header           = \"<Diameter-Header:\" command-id\r\n                         [r-bit] [p-bit] [e-bit] [application-id]\">\"\r\n\r\nBut \"Diameter-Header:\" is not used throughout the text so maybe it is better to update the grammar to \"Diameter Header:\".\r\n\r\n\r\n command-def      = \"<\" command-name \">\" \"::=\" diameter-message\r\n\r\nbut the example is not using <> for the command-name (\"Example-Request\"). For the grouped-avp-def application is sometimes used with \"<\" name \">\" and sometimes just name.",
    "submit_date": "2016-09-13",
    "submitter_name": "Holger Freyther",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4808",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "1.1.3",
    "orig_text": "This document obsoletes RFC 3588 but is fully backward compatible\r\n   with that document.",
    "correct_text": "This document obsoletes RFC 3588.",
    "notes": "When comparing the BNF for the answer messages CEA, DPA, DWA, RAA, STA and ASA it can be seen that FAILED-AVP avp is no longer marked with the * which means it can be present only once in the diameter message.\r\nPrevious specification (rfc3588) defines multiple FAILED-AVP avp usage in a single diameter message.\r\nSimilar case is for Vendor-Specific-Application-Id AVP definition. \r\nPrevious specification allows multiple usage of Vendor-Id avp in a single message while the new specification defines it as a single mandatory AVP:\r\nrfc3588:\r\n<Vendor-Specific-Application-Id> ::= < AVP Header: 260 >\r\n                                     1* [ Vendor-Id ]\r\n                                     0*1{ Auth-Application-Id }\r\n                                     0*1{ Acct-Application-Id }\r\n\r\nrfc6733:\r\n<Vendor-Specific-Application-Id> ::= < AVP Header: 260 >\r\n                                           { Vendor-Id }\r\n                                           [ Auth-Application-Id ]\r\n                                           [ Acct-Application-Id ]\r\n\t\t\t\t\t\t\t\t\t\t   \r\nHow this facts applies to the sentence about fully backward compatibility in the section 1.1.3?",
    "submit_date": "2016-09-22",
    "submitter_name": "Zbigniew Rapnicki",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4887",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "6.2",
    "orig_text": " When a request is locally processed, the following procedures MUST be\r\n   applied to create the associated answer, in addition to any\r\n   additional procedures that MAY be discussed in the Diameter\r\n   application defining the command:\r\n\r\n   o  The same Hop-by-Hop Identifier in the request is used in the\r\n      answer.\r\n\r\n   o  The local host's identity is encoded in the Origin-Host AVP.\r\n\r\n   o  The Destination-Host and Destination-Realm AVPs MUST NOT be\r\n      present in the answer message.\r\n",
    "correct_text": " When a request is locally processed, the following procedures MUST be\r\n   applied to create the associated answer, in addition to any\r\n   additional procedures that MAY be discussed in the Diameter\r\n   application defining the command:\r\n\r\n   o  The same Hop-by-Hop Identifier in the request is used in the\r\n      answer.\r\n\r\n   o  The local host's identity is encoded in the Origin-Host AVP.\r\n\r\n   o  The local realm's identity is encoded in the Origin-Realm AVP.\r\n\r\n   o  The Destination-Host and Destination-Realm AVPs MUST NOT be\r\n      present in the answer message.",
    "notes": "Unlike Origin-Host AVP, it is not stated explicitly that Origin-Realm AVP MUST be encoded in the associated answer. While both these AVPs MUST be present in all Diameter messages according to their descriptions.",
    "submit_date": "2016-12-13",
    "submitter_name": "Mikhail Zaytsev",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4931",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "6.1.9",
    "orig_text": "Figure 6.1 provides an example of message routing using the procedures\r\nlisted in these sections.\r\n\r\n(Origin-Host=nas.example.net)    (Origin-Host=nas.example.net)\r\n(Origin-Realm=example.net)       (Origin-Realm=example.net)\r\n(Destination-Realm=example.com)  (Destination-Realm=example.com)\r\n                                 (Route-Record=nas.example.net)\r\n\r\n+------+      ------>      +------+      ------>      +------+\r\n|      |     (Request)     |      |      (Request)    |      |\r\n| NAS  +-------------------+ DRL  +-------------------+ HMS  |\r\n|      |                   |      |                   |      |\r\n+------+     <------       +------+     <------       +------+\r\nexample.net    (Answer)   example.net     (Answer)   example.com\r\n(Origin-Host=hms.example.com)   (Origin-Host=hms.example.com)\r\n(Origin-Realm=example.com)      (Origin-Realm=example.com)\r\n\r\n       Figure 6: Routing of Diameter messages",
    "correct_text": "Figure 6.1 provides an example of message routing using the procedures\r\nlisted in these sections.\r\n\r\n(Origin-Host=nas.example.net)    (Origin-Host=nas.example.net)\r\n(Origin-Realm=example.net)       (Origin-Realm=example.net)\r\n(Destination-Realm=example.com)  (Destination-Realm=example.com)\r\n(Route-Record=nas.example.net)*  (Route-Record=nas.example.net)\r\n                                 (Route-Record=drl.example.net)*\r\n+------+      ------>      +------+      ------>      +------+\r\n|      |     (Request)     |      |      (Request)    |      |\r\n| NAS  +-------------------+ DRL  +-------------------+ HMS  |\r\n|      |                   |      |                   |      |\r\n+------+     <------       +------+     <------       +------+\r\nexample.net    (Answer)   example.net     (Answer)   example.com\r\n(Origin-Host=hms.example.com)   (Origin-Host=hms.example.com)\r\n(Origin-Realm=example.com)      (Origin-Realm=example.com)\r\n\r\n*Optional.\r\n\r\n                  Figure 6: Routing of Diameter messages",
    "notes": "The relay or proxy agent should append their own identity optionally in an additional Route-Record AVP (282).\n --VERIFIER NOTES-- \nThe Route-Record is primarily used to detect loops:\r\n\r\n6.1.3.  Receiving Requests\r\n\r\n   A relay or proxy agent MUST check for forwarding loops when receiving\r\n   requests.  A loop is detected if the server finds its own identity in\r\n   a Route-Record AVP.  When such an event occurs, the agent MUST answer\r\n   with the Result-Code AVP set to DIAMETER_LOOP_DETECTED.\r\n\r\nHow  to populate the Route-Record is described twice:\r\n\r\nSection 2.9:\r\n\r\n   As noted in Section 6.1.9, a relay or proxy agent MUST append a\r\n   Route-Record AVP to all requests forwarded.  The AVP contains the\r\n   identity of the peer from which the request was received.\r\n\r\n6.7.1.  Route-Record AVP\r\n\r\n   The Route-Record AVP (AVP Code 282) is of type DiameterIdentity.  The\r\n   identity added in this AVP MUST be the same as the one received in\r\n   the Origin-Host of the Capabilities Exchange message.\r\n\r\nTherefore, it's  \"rather clear\" that a relay and a proxy MUST append a Route-Record to all requests forwarded with the identity of the peer from which the request was received\r\n\r\nI think that Luis was maybe misled by the following text:\r\n\r\n6.1.3.  Receiving Requests\r\n\r\n   A relay or proxy agent MUST check for forwarding loops when receiving\r\n   requests.  A loop is detected if the server finds its own identity in\r\n   a Route-Record AVP.  When such an event occurs, the agent MUST answer\r\n   with the Result-Code AVP set to DIAMETER_LOOP_DETECTED.\r\n\r\nin which \"find its own identity\" might have been confusing out of context. But sections 2.9 and 6.7.1 should have clarified this misunderstanding. \r\n\r\nWhatever the reason for the proposed errata, it can be safely rejected.\r\n",
    "submit_date": "2017-02-09",
    "submitter_name": "Luiz Solis",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "5084",
    "doc-id": "RFC6733",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Technical",
    "section": "8.16",
    "orig_text": "By including Origin-State-Id in a message, it allows other Diameter\r\nentities to infer that sessions associated with a lower Origin-State-Id \r\nare no longer active.\r\nIf an access device does not intend for such inferences to be made, it \r\nMUST either not include Origin-State-Id in any message or set its value \r\nto 0.\r\n\r\n",
    "correct_text": "By including Origin-State-Id in a message, it allows other Diameter\r\nentities to infer that sessions associated with a lower Origin-State-Id \r\nare no longer active.\r\nIf an access device does not intend for such inferences to be made, it \r\nMUST either not include Origin-State-Id in any message or set its value \r\nto 0. \r\nAs a special case when the value of Origin-State-Id changes from \r\n4294967295 to 0, then also the access device  clear all the sessions.",
    "notes": "Origin-State-Id is defined as Unsigned32 in RFC 6733, Section 8.16. So the maximum \r\nvalue it can have is 4294967295. If the system restarts many times and the value of\r\nOrigin-State-Id reaches the value which is same as its maximum value 4294967295. \r\nThen what will happen for the next restart. At the next restart the value of Origin-State-Id \r\nwill be 0 if we try to increase the value of Origin-State-Id.\r\nIt is not defined in the RFC 6733, that how the system should behave after 4294967295-th \r\nrestart with respect to Origin-State-Id.\r\n\r\nGenerally when the peer receives an increased value of Origin-State-Id, then it clear all sessions.\r\nIf the value of Origin-State-Id reaches its maximum i.e., 4294967295, then after another restart \r\nits value will be 0. For a special case for transition of value of Origin-State-Id from \r\n4294967295 to 0, the peer should clear its session.",
    "submit_date": "2017-08-11",
    "submitter_name": "Priyatosh Mandal",
    "verifier_id": "132",
    "verifier_name": "Benoit Claise",
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "6171",
    "doc-id": "RFC6733",
    "errata_status_code": "Verified",
    "errata_type_code": "Technical",
    "section": "6.1.3",
    "orig_text": "A relay or proxy agent MUST check for forwarding loops when receiving\r\nrequests.  A loop is detected if the server finds its own identity in\r\na Route-Record AVP.  When such an event occurs, the agent MUST answer\r\nwith the Result-Code AVP set to DIAMETER_LOOP_DETECTED.",
    "correct_text": "A relay or proxy agent MUST check for forwarding loops when receiving\r\nrequests. A loop is detected if a relay or proxy agent finds its own\r\nidentity in a Route-Record AVP.  When such an event occurs, the agent\r\nMUST answer with the Result-Code AVP set to DIAMETER_LOOP_DETECTED.",
    "notes": "The term \"server\" used to identify party which is to detect its own identity as a part of Route-Record AVP is semantically too close to the term Diameter Server. If \"relay or proxy agent MUST check\", the question is what would be the consequence of such action if  the (Diameter) \"server\" is to do the \"detecting\"?\r\n\r\n== Verifier note\r\n\r\nThis section is about relays/proxy agents checks to detect loops. See also Rob's comment at https://mailarchive.ietf.org/arch/msg/dime/4GVvCGAcMOtfRLuPe3amF2xX2E8/\r\n\r\n",
    "submit_date": "2020-05-13",
    "submitter_name": "Valentin Micic",
    "verifier_id": "184",
    "verifier_name": "Mohamed Boucadair",
    "update_date": "2025-03-28 10:57:18"
  },
  {
    "errata_id": "6832",
    "doc-id": "RFC6733",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "7.1.4",
    "orig_text": "DIAMETER_OUT_OF_SPACE 4002\r\n\r\n      A Diameter node received the accounting request but was unable to\r\n      commit it to stable storage due to a temporary lack of space.",
    "correct_text": "DIAMETER_OUT_OF_SPACE 4002\r\n\r\n      A Diameter node received the request but was unable to\r\n      commit it to stable storage due to a temporary lack of space.",
    "notes": "Original text signifies accounting application explicitly. It can be any of Accounting or Authorization.",
    "submit_date": "2022-02-03",
    "submitter_name": "Kshitij Dutt",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": null
  },
  {
    "errata_id": "6833",
    "doc-id": "RFC6733",
    "errata_status_code": "Rejected",
    "errata_type_code": "Technical",
    "section": "2.4",
    "orig_text": "The following Application Id values are defined:\r\n\r\n         Diameter common message       0\r\n         Diameter base accounting      3\r\n         Relay                         0xffffffff",
    "correct_text": "The following Application Id values are defined:\r\n\r\n         Diameter common message       0\r\n         Diameter base accounting      3\r\n         Relay                         0xffffff",
    "notes": "I presume relay application ID should be 0xffffff decimal equivalent of which is 16777215.\r\nInstead 0xffffffff decimal translates to 4294967295.\r\n\r\nThis is assumption.\n --VERIFIER NOTES-- \n The Application-ID field in the Diameter header is 32 bits long, hence the exist Application Id for \"Relay\" is correct.",
    "submit_date": "2022-02-03",
    "submitter_name": "Kshitij Dutt",
    "verifier_id": "166",
    "verifier_name": "Rob Wilton",
    "update_date": "2023-10-02 06:55:24"
  }
]
